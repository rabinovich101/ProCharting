<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ProCharting Performance Benchmarks</title>
  <style>
    body {
      margin: 0;
      padding: 20px;
      font-family: system-ui, -apple-system, sans-serif;
      background: #f5f5f5;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    h1 {
      color: #333;
      margin-bottom: 30px;
    }
    
    .benchmark-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .benchmark-card {
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    
    .benchmark-card h3 {
      margin-top: 0;
      color: #555;
    }
    
    .metric {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid #eee;
    }
    
    .metric:last-child {
      border-bottom: none;
    }
    
    .metric-value {
      font-weight: bold;
      color: #007bff;
    }
    
    .chart-container {
      height: 400px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 20px;
    }
    
    .controls {
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 20px;
    }
    
    button {
      padding: 10px 20px;
      margin-right: 10px;
      border: none;
      border-radius: 4px;
      background: #007bff;
      color: white;
      cursor: pointer;
      font-size: 14px;
    }
    
    button:hover {
      background: #0056b3;
    }
    
    button:disabled {
      background: #ccc;
      cursor: not-allowed;
    }
    
    .progress {
      margin-top: 20px;
      padding: 15px;
      background: #e9ecef;
      border-radius: 4px;
      display: none;
    }
    
    .progress.active {
      display: block;
    }
    
    .results {
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      margin-top: 20px;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
    }
    
    th, td {
      padding: 10px;
      text-align: left;
      border-bottom: 1px solid #eee;
    }
    
    th {
      font-weight: bold;
      background: #f8f9fa;
    }
    
    .success {
      color: #28a745;
    }
    
    .warning {
      color: #ffc107;
    }
    
    .danger {
      color: #dc3545;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ProCharting Performance Benchmarks</h1>
    
    <div class="controls">
      <h3>Benchmark Controls</h3>
      <button id="run-all">Run All Benchmarks</button>
      <button id="run-render">Test Rendering</button>
      <button id="run-data">Test Data Processing</button>
      <button id="run-memory">Test Memory Usage</button>
      <button id="stop">Stop</button>
      <button id="export">Export Results</button>
      
      <div class="progress" id="progress">
        <strong>Running:</strong> <span id="current-test">-</span>
        <br>
        <strong>Progress:</strong> <span id="test-progress">0%</span>
      </div>
    </div>
    
    <div class="benchmark-grid">
      <div class="benchmark-card">
        <h3>Rendering Performance</h3>
        <div class="metric">
          <span>FPS (1M points)</span>
          <span class="metric-value" id="fps-1m">-</span>
        </div>
        <div class="metric">
          <span>Initial Render</span>
          <span class="metric-value" id="initial-render">-</span>
        </div>
        <div class="metric">
          <span>Pan/Zoom Latency</span>
          <span class="metric-value" id="pan-zoom">-</span>
        </div>
        <div class="metric">
          <span>Max Data Points</span>
          <span class="metric-value" id="max-points">-</span>
        </div>
      </div>
      
      <div class="benchmark-card">
        <h3>Data Processing</h3>
        <div class="metric">
          <span>Updates/Second</span>
          <span class="metric-value" id="updates-sec">-</span>
        </div>
        <div class="metric">
          <span>Decimation Speed</span>
          <span class="metric-value" id="decimation">-</span>
        </div>
        <div class="metric">
          <span>Aggregation Speed</span>
          <span class="metric-value" id="aggregation">-</span>
        </div>
        <div class="metric">
          <span>Binary Encoding</span>
          <span class="metric-value" id="encoding">-</span>
        </div>
      </div>
      
      <div class="benchmark-card">
        <h3>Memory Usage</h3>
        <div class="metric">
          <span>Bytes/Point</span>
          <span class="metric-value" id="bytes-point">-</span>
        </div>
        <div class="metric">
          <span>Total Memory</span>
          <span class="metric-value" id="total-memory">-</span>
        </div>
        <div class="metric">
          <span>GPU Memory</span>
          <span class="metric-value" id="gpu-memory">-</span>
        </div>
        <div class="metric">
          <span>GC Pressure</span>
          <span class="metric-value" id="gc-pressure">-</span>
        </div>
      </div>
      
      <div class="benchmark-card">
        <h3>System Info</h3>
        <div class="metric">
          <span>Renderer</span>
          <span class="metric-value" id="renderer">-</span>
        </div>
        <div class="metric">
          <span>CPU Cores</span>
          <span class="metric-value" id="cpu-cores">-</span>
        </div>
        <div class="metric">
          <span>Device Pixel Ratio</span>
          <span class="metric-value" id="dpr">-</span>
        </div>
        <div class="metric">
          <span>Bundle Size</span>
          <span class="metric-value" id="bundle-size">-</span>
        </div>
      </div>
    </div>
    
    <div class="chart-container" id="test-chart"></div>
    
    <div class="results" id="results" style="display: none;">
      <h3>Detailed Results</h3>
      <table id="results-table">
        <thead>
          <tr>
            <th>Test</th>
            <th>Data Points</th>
            <th>Time (ms)</th>
            <th>Throughput</th>
            <th>Memory (MB)</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
  
  <script type="module" src="./benchmark.js"></script>
</body>
</html>